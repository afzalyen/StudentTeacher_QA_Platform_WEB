@model List<test_dotnet1_Models.Models.Question>

<h2>Activity</h2>

<ul>
    @foreach (var question in Model)
    {
        <li>
            <h3><a asp-action="AnswerQuestion" asp-route-id="@question.Id">@question.Title</a></h3>
            <p>@question.Description</p>
            <p>Asked by: @question.UserId</p>
            <p>Created at: @question.CreatedAt.ToString("g")</p>

            @if (ViewData["UserType"] != null && ViewData["UserType"].ToString() == "Student" && !question.IsAnswered) // Only show delete option for students on unanswered questions
            {
                <form asp-action="DeleteQuestion" method="post" onsubmit="return confirm('Are you sure you want to delete this question?');">
                    <input type="hidden" name="id" value="@question.Id" />
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            }
        </li>
    }
</ul>
