@model IEnumerable<dynamic> // Dynamic to accommodate anonymous objects

<h2>Activity</h2>

<ul>
    @foreach (var item in Model)
    {
        <li>
            <h3><a asp-action="AnswerQuestion" asp-route-id="@item.Question.Id">@item.Question.Title</a></h3>
            <p>@item.Question.Description</p>
            <p>Asked by: @item.AskedBy</p> <!-- Show the name of the user who asked -->
            <p>Answered by: @if (item.AnsweredBy != null)
                {
                    @item.AnsweredBy
                }
                else
                {
                    <span>Not answered yet</span>
                }</p> <!-- Show the answerer's name or email -->
            <p>Created at: @item.Question.CreatedAt.ToString("g")</p>

            @if (ViewData["UserType"] != null && ViewData["UserType"].ToString() == "Student" && !item.Question.IsAnswered) // Only show delete option for students on unanswered questions
            {
                <form asp-action="DeleteQuestion" method="post" onsubmit="return confirm('Are you sure you want to delete this question?');">
                    <input type="hidden" name="id" value="@item.Question.Id" />
                    <button type="submit" class="btn btn-danger">Delete</button>
                </form>
            }
        </li>
    }
</ul>
